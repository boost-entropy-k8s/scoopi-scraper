locatorGroups:
  
  booksGroup:   
    locators: [
       { name: acme, url: "/devdefs/books/page/page-1.html" }  
    ]
                                        
taskGroups:

  booksGroup:
    booksDataTask:
      dataDef: booksData
      steps: jsoupTem
      
    booksLinkTask:
      dataDef: booksLink
      steps: jsoupLink
           

dataDefs:

  booksData:           
    query:
      block: "section ol > li:nth-child(%{item.book.index}) > article"
      selector: "h3 > a attribute: title"
    items: [
      item: { name: "book", indexRange: 1-2, value: "book"},      
    ]
    dims: [
      item: { name: "title", selector: "h3 > a attribute: title" },     
      item: { name: "url", selector: "h3 > a attribute: href" },
      item: { name: "imgUrl", selector: "img attribute: src" },
      item: { name: "price", selector: "p[class='price_color']" },
      item: { name: "avail", selector: "p[class='instock availability']" },
      item: { name: "date", script: "document.getFromDate()" },
    ]

  booksLink:
    query:
      block: "li[class='next']"              
    items: [ 
      item: { name: "link",  selector: "a attribute: href", 
        linkGroup: booksGroup, prefix: [ "/devdefs/books/page/" ] },
    ]

steps:
  jsoupTem:
    seeder:
      class: "org.codetab.scoopi.step.extract.LocatorSeeder"
      previous: start
      next: loader
    loader:
      class: "org.codetab.scoopi.step.extract.URLLoader"
      previous: seeder
      next: parser
    parser:
      class: "org.codetab.scoopi.step.parse.jsoup.Parser"
      previous: loader
      next: filter
    filter:
      class: "org.codetab.scoopi.step.process.DataFilter"
      previous: parser
      next: end
      
  jsoupLink:
    seeder:
      class: "org.codetab.scoopi.step.extract.LocatorSeeder"
      previous: start
      next: loader
    loader:
      class: "org.codetab.scoopi.step.extract.URLLoader"
      previous: seeder
      next: parser
    parser:
      class: "org.codetab.scoopi.step.parse.jsoup.Parser"
      previous: loader
      next: process
    process:
      class: "org.codetab.scoopi.step.process.LocatorCreator"
      previous: parser
      next: seeder      
                  
